# 接口说明

版本：`1.0`

作者：`鲁浩`

日期：`2016.1.21`

### 统一格式：

* 状态码

    |状态码|含义|
    |---|---|
    |100|正常|
    |201|headers缺失|
    |202|非法参数|
    |203|无效apikey|
    |204|无效接口|
    |3XX|具体API定义|

* 返回格式

    ```
    {
        code: '100',
        msg: 'OK',
        data: [
            '1',
            '2',
            '3'
        ]
    }
    ```

    ```
    {
        code: '100',
        msg: 'OK',
        data: ''
    }
    ```

    ```
    {
        code: '100',
        msg: 'OK',
        data: [
            {
                'name': '1',
                'number': 1,
                'like': True
            },
            {
                'name': '2',
                'number': 2,
                'like': True
            },
            {
                'name': '3',
                'number': 3,
                'like': True
            }
        ]
    }
    ```

* 请求格式

    ```
    {
        ...
        method: 'GET',
        apikey: 'xxx',
        apiver: 1
        ...
        params {
            'lat': 1,
            'lng': 1
        }
    }
    ```

### 应用服务器：

* Tornado
    * 后端框架。
    * 更好地长连接，以提供持续性的服务。
    * 高并发的支持。

* Nginx
    * 部署，反向代理。

### 数据存储：

* PostgreSQL
    * 存储用户信息、多媒体的元数据、标签、路径等等。
    * 更好的GIS信息支持。

* Redis
    * 用于Feed的处理、session系统和排序系统。

* Memcached
    * 缓存数据，加速访问。

* 七牛：
    * 第三方的图片处理服务。
    * 也可以考虑自己做图片处理，把图片统一存储在价格更便宜、访问更稳定的平台。

### 任务队列/推送通知：

* Celery+Rabbitmq
    * 通过异步处理解决耗时较长的操作。
    * 例如当一个用户发布动态，将该条消息加入其关注者的Timeline。

* 极光推送
    * 第三方服务，对于Hybrid App支持较好。

###监控：

* 待定
    * 建立日志系统，收集统计信息，图形化度量。

